# API Governor Skill

> ä¿æŠ¤ API å¥‘çº¦ç¨³å®šæ€§ï¼Œé˜²æ­¢æœªç¡®è®¤çš„ Breaking Change

---

## ç›®æ ‡

- æ£€æµ‹ API å˜æ›´æ˜¯å¦ä¸º Breaking Change
- å¼ºåˆ¶ API å˜æ›´èµ°ææ¡ˆæµç¨‹
- è‡ªåŠ¨æç¤ºæ›´æ–° API æ–‡æ¡£

---

## å¿…è¯»æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `.claude/PROJECT.md` | æ¨¡å—å®šä¹‰ã€ä¿æŠ¤è§„åˆ™ |
| `docs/api/API.md` | API æ–‡æ¡£ï¼ˆå¦‚å­˜åœ¨ï¼‰ |

---

## è§¦å‘æ¡ä»¶

å½“æ£€æµ‹åˆ°ä»¥ä¸‹ API ç›¸å…³æ–‡ä»¶å˜æ›´æ—¶è§¦å‘ï¼š

- `docs/api/**` â€” API æ–‡æ¡£
- `**/routes/**` â€” è·¯ç”±å®šä¹‰
- `**/api/**` â€” API å¤„ç†å™¨
- `**/controllers/**` â€” æ§åˆ¶å™¨
- `**/endpoints/**` â€” ç«¯ç‚¹å®šä¹‰

---

## Breaking Change æ£€æµ‹è§„åˆ™

### 1. è·¯å¾„å˜æ›´

| å˜æ›´ç±»å‹ | Breaking | è¯´æ˜ |
|----------|----------|------|
| åˆ é™¤ path | âœ… | å®¢æˆ·ç«¯è°ƒç”¨å¤±è´¥ |
| ä¿®æ”¹ path | âœ… | å®¢æˆ·ç«¯è°ƒç”¨å¤±è´¥ |
| æ–°å¢ path | âŒ | å‘åå…¼å®¹ |

### 2. HTTP æ–¹æ³•å˜æ›´

| å˜æ›´ç±»å‹ | Breaking | è¯´æ˜ |
|----------|----------|------|
| åˆ é™¤ method | âœ… | åŠŸèƒ½ä¸¢å¤± |
| ä¿®æ”¹ method | âœ… | å®¢æˆ·ç«¯è¯·æ±‚å¤±è´¥ |
| æ–°å¢ method | âŒ | å‘åå…¼å®¹ |

### 3. å‚æ•°å˜æ›´

| å˜æ›´ç±»å‹ | Breaking | è¯´æ˜ |
|----------|----------|------|
| åˆ é™¤å‚æ•° | âœ… | ä¾èµ–è¯¥å‚æ•°çš„å®¢æˆ·ç«¯å¤±è´¥ |
| ä¿®æ”¹å‚æ•°å | âœ… | ç­‰åŒäºåˆ é™¤ |
| å‚æ•°ç±»å‹å˜æ›´ | âœ… | ç±»å‹ä¸åŒ¹é… |
| optional â†’ required | âœ… | æ–°å¢å¿…å¡« |
| required â†’ optional | âŒ | æ”¾å®½é™åˆ¶ |
| æ–°å¢ optional å‚æ•° | âŒ | å‘åå…¼å®¹ |

### 4. å“åº”å˜æ›´

| å˜æ›´ç±»å‹ | Breaking | è¯´æ˜ |
|----------|----------|------|
| åˆ é™¤å“åº”å­—æ®µ | âœ… | ä¾èµ–è¯¥å­—æ®µçš„å®¢æˆ·ç«¯å¤±è´¥ |
| ä¿®æ”¹å“åº”ç»“æ„ | âš ï¸ | è§†æƒ…å†µåˆ¤æ–­ |
| æ–°å¢å“åº”å­—æ®µ | âŒ | å‘åå…¼å®¹ |

---

## æ‰§è¡Œæµç¨‹

```
API æ–‡ä»¶å˜æ›´
     â”‚
     â–¼
è¯»å– PROJECT.md è·å–æ¨¡å—ä¿¡æ¯
     â”‚
     â–¼
åˆ†æå˜æ›´å†…å®¹ï¼ˆgit diffï¼‰
     â”‚
     â–¼
åˆ¤æ–­æ˜¯å¦ Breaking Change
     â”‚
     â”œâ”€â†’ æ˜¯ Breaking Change
     â”‚        â”‚
     â”‚        â–¼
     â”‚   è¾“å‡º API Change Proposal
     â”‚        â”‚
     â”‚        â–¼
     â”‚   ç­‰å¾…ç¡®è®¤
     â”‚
     â””â”€â†’ é Breaking Change
              â”‚
              â–¼
         å…è®¸æ‰§è¡Œ
```

---

## è¾“å‡ºæ ¼å¼

### API Change Proposalï¼ˆBreaking Change æ—¶ï¼‰

```
âš ï¸ API Change Proposal

Breaking Change Detected!

Affected Endpoint: <method> <path>
Files: <changed-files>

Changes:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<change-details>

Impact:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<impact-analysis>

Migration Guide:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<suggested-migration-steps>

Required Actions:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[ ] Update docs/api/API.md
[ ] Notify API consumers
[ ] Version bump (if applicable)

Confirm this Breaking Change? [y/N]
```

### Non-Breaking Change

```
âœ… API Change Approved

Endpoint: <method> <path>
Type: Non-breaking change

Remember to update docs/api/API.md if behavior changed.
```

---

## è‡ªåŠ¨æ›´æ–°

### 1. æ›´æ–° PROJECT.md å¼€å‘å†å²

åœ¨ç¡®è®¤ API å˜æ›´åï¼Œè¿½åŠ è®°å½•ï¼š

```markdown
| æ—¥æœŸ | Commit | æè¿° |
|------|--------|------|
| 2026-02-15 | abc1234 | api: modify <endpoint> [BREAKING] |
```

### 2. æç¤ºæ›´æ–° API æ–‡æ¡£

```
ğŸ“ API Documentation Reminder

API files changed:
- <file-path>

Action: Update docs/api/API.md to reflect changes
```

---

## API ç”Ÿå‘½å‘¨æœŸç®¡ç†

| çŠ¶æ€ | å«ä¹‰ | å˜æ›´è§„åˆ™ |
|------|------|----------|
| `experimental` | å®éªŒæ€§ | å¯è‡ªç”±ä¿®æ”¹ |
| `stable` | å·²ç¨³å®š | éœ€ææ¡ˆç¡®è®¤ |
| `deprecated` | å·²åºŸå¼ƒ | æ ‡è®°åˆ é™¤è®¡åˆ’ |

### çŠ¶æ€è½¬æ¢

```
experimental â†’ stable  : æ—  Breaking Change + ç¨³å®šä½¿ç”¨
stable â†’ deprecated    : å‘å¸ƒæ›¿ä»£æ–¹æ¡ˆ + è®¾ç½®ç§»é™¤æ—¥æœŸ
deprecated â†’ removed   : åˆ°æœŸåç§»é™¤
```

---

## ç¦æ­¢è¡Œä¸º

- âŒ è·³è¿‡ Breaking Change æ£€æµ‹
- âŒ éšè— API å˜æ›´å½±å“
- âŒ è‡ªåŠ¨ä¿®æ”¹ stable API
- âŒ ä¸æ›´æ–° API æ–‡æ¡£

---

## ç¤ºä¾‹åœºæ™¯

### åœºæ™¯ 1ï¼šåˆ é™¤ API å‚æ•°

```
æ£€æµ‹åˆ°: DELETE /api/users/{id} çš„ force å‚æ•°è¢«åˆ é™¤
åˆ¤å®š: Breaking Change
è¾“å‡º: API Change Proposal
åŸå› : ä¾èµ– force å‚æ•°çš„å®¢æˆ·ç«¯å°†å¤±è´¥
```

### åœºæ™¯ 2ï¼šæ–°å¢ optional å‚æ•°

```
æ£€æµ‹åˆ°: GET /api/users æ–°å¢ optional å‚æ•° role
åˆ¤å®š: Non-Breaking
è¾“å‡º: å…è®¸æ‰§è¡Œ
æç¤º: è®°å¾—æ›´æ–° API æ–‡æ¡£
```

### åœºæ™¯ 3ï¼šå“åº”ç»“æ„å˜æ›´

```
æ£€æµ‹åˆ°: GET /api/users/{id} å“åº”ä» {user: {...}} å˜ä¸º {data: {user: {...}}}
åˆ¤å®š: Breaking Change
è¾“å‡º: API Change Proposal
åŸå› : å®¢æˆ·ç«¯è§£æé€»è¾‘éœ€è¦ä¿®æ”¹
```
