# AI辅助开发大型项目管理框架

## 一、背景：AI 辅助开发的挑战

随着 Claude、GPT 等大语言模型的能力不断提升，AI 辅助编程已成为现实。开发者可以通过自然语言描述需求，让 AI 生成代码、修复 Bug、甚至完成整个功能模块。

然而，在中大型项目的开发中，直接让 AI 参与开发会面临一系列严峻挑战：

| 问题 | 具体表现 |
|------|----------|
| **代码安全** | AI 可能随意修改核心模块，导致系统崩溃 |
| **提交规范** | AI 生成的提交信息混乱，难以追溯历史 |
| **状态不透明** | 项目进度、模块状态缺乏统一管理 |
| **API 契约** | AI 可能无意中破坏 API 接口，影响调用方 |
| **开发焦点** | AI 容易"跑偏"，偏离当前开发目标 |

这些问题使得 AI 辅助开发难以在严肃的生产项目中落地。

## 二、核心理念：极简但可控

ClaudeDevKit 的设计理念可以概括为六个字：**极简但可控**。

### 极简

- **8 个核心文件** 完成全部治理能力
- **1 个配置文件** 管理项目状态
- **4 个命令** 覆盖常用场景
- **3 个 Skills** 实现自动化保护

### 可控

- **三级保护**：active / stable / core，防止核心代码被意外修改
- **API 契约保护**：自动检测 Breaking Change
- **目标追踪**：保持开发焦点不偏离
- **历史追溯**：自动记录每次变更的详细信息

### 自动化驱动

以 **Git 提交** 作为自动化触发点。每次提交时：

1. 执行代码检查
2. 检测文件保护等级
3. 检测 API 变更
4. 检查目标进度
5. 生成规范提交信息
6. 自动更新项目状态文件
7. 记录详细 Git 历史

## 三、架构设计

### 整体结构

```
ClaudeDevKit/
│
├── .claude/                          # AI 控制层
│   ├── PROJECT.md                    # 唯一配置文档
│   ├── commands/                     # 命令定义
│   │   ├── ask.md                    # 只读问答
│   │   ├── commit.md                 # Git 提交流程
│   │   ├── goal.md                   # 目标管理
│   │   └── readproject.md            # 项目概览
│   └── skills/                       # 治理技能模块
│       ├── api-governor.md           # API 契约治理
│       ├── workspace-governor.md     # 工作区治理
│       └── goal-tracker.md           # 目标追踪
│
├── docs/                             # 文档层
│   ├── ROADMAP.md                    # 项目路线图
│   ├── CURRENT_GOAL.md               # 当前开发目标
│   ├── api/API.md                    # API 文档
│   └── git/                          # Git 历史系统
│       ├── history.md                # 提交历史摘要
│       └── logs/                     # 详细提交日志
│
└── src/                              # 源代码目录
```

### PROJECT.md：项目配置中心

PROJECT.md 是整个框架的核心配置文件，包含：

- **项目信息**：名称、类型、描述
- **模块定义**：路径、状态、保护等级
- **保护规则**：文件保护、API 保护
- **开发历史**：自动追加的提交记录

模块状态用于追踪开发进度：

| Status | 说明 |
|--------|------|
| `todo` | 未开始 |
| `dev` | 开发中 |
| `done` | 已完成 |

模块等级用于控制修改权限：

| Level | 含义 | 修改规则 |
|-------|------|----------|
| `active` | 活跃开发 | 自由修改 |
| `stable` | 已稳定 | 需确认 |
| `core` | 核心保护 | 禁止自动修改 |

## 四、命令系统

### /readproject — 项目概览

**用途**：新会话开始时执行，让 AI 快速建立项目认知

**输出内容**：
- 项目信息（名称、类型、描述）
- 模块状态（路径、状态、保护等级）
- 当前目标（任务、状态、进度）
- 最近历史（最近 3 条提交）

**特性**：严格只读，不修改任何文件

### /ask — 只读问答

**用途**：安全地分析代码、理解架构、排查问题

**示例**：
```bash
/ask 这个项目的认证流程是怎样的？
/ask 为什么这个函数会报错？
```

**特性**：禁止修改、创建、删除文件

### /commit — 规范化提交

**完整流程**：

```
1. Pre-commit 检查（Lint）
       ↓
2. workspace-governor（文件保护检查）
       ↓
3. api-governor（API 变更检测）
       ↓
4. goal-tracker（目标进度检查）
       ↓
5. Stage 变更文件
       ↓
6. 生成 Conventional Commits 格式的提交信息
       ↓
7. 执行 Git Commit
       ↓
8. 自动更新状态文件
   - PROJECT.md（开发历史）
   - CURRENT_GOAL.md（进度记录）
   - ROADMAP.md（当前焦点）
       ↓
9. 更新 Git 历史记录
   - history.md（摘要）
   - logs/（详细日志）
       ↓
10. Push
```

### /goal — 目标管理

**用法**：
```bash
/goal                  # 查看当前目标
/goal set <任务描述>    # 设置新目标
/goal done             # 标记完成
/goal block <原因>     # 标记阻塞
/goal unblock          # 解除阻塞
```

**核心理念**：**单一焦点模式** — 一次只关注一个核心任务

## 五、Skills 系统

Skills 是可复用的治理模块，被 `/commit` 命令调用执行保护逻辑。

### workspace-governor — 文件保护

**职责**：根据模块等级控制修改权限

```
修改 core 文件 → ⛔ Core Protection Warning → 阻止操作
修改 stable 文件 → ⚠️ 等待确认
修改 active 文件 → 静默通过
```

**文件-模块匹配规则**：
1. 精确匹配
2. 前缀匹配
3. 通配符匹配
4. 默认 active

### api-governor — API 契约保护

**职责**：检测 API 变更，防止 Breaking Change

**Breaking Change 判定规则**：

| 变更类型 | Breaking | 说明 |
|----------|----------|------|
| 删除 API 路径 | ✅ | 客户端调用失败 |
| 删除参数 | ✅ | 客户端失败 |
| 修改参数类型 | ✅ | 类型不匹配 |
| optional → required | ✅ | 新增必填 |
| 新增 optional 参数 | ❌ | 向后兼容 |

### goal-tracker — 目标追踪

**职责**：追踪开发目标进度

**行为**：
- `in_progress`：输出目标完成询问
- `completed`：提示设置新目标
- `blocked`：输出阻塞原因

## 六、典型工作流

### 新会话开始

```bash
# 1. 项目概览，恢复上下文
/readproject

# 2. 确认当前目标
/goal

# 3. 开始开发
[开发工作...]

# 4. 提交代码
/commit
# → 自动执行保护检查
# → 自动更新状态文件
# → 自动记录 Git 历史

# 5. 目标完成
/goal done
```

### 日常开发

```bash
# 早上开始
/readproject

# 开发中（多次提交）
/commit
/commit

# 完成功能
/goal done

# 设置下一个目标
/goal set 实现用户注册 API
```

## 七、设计优势

| 优势 | 说明 |
|------|------|
| **极简性** | 8 个文件实现完整治理，学习成本低 |
| **自动化** | Git 提交触发所有更新，无需额外操作 |
| **可控性** | 三级保护机制，核心代码安全可控 |
| **可追溯** | 完整的历史记录，变更一目了然 |
| **可聚焦** | 单一目标模式，开发不跑偏 |
| **标准化** | Conventional Commits，团队协作友好 |
| **可扩展** | 灵活的模块定义，适应各类项目 |

## 八、总结

ClaudeDevKit 通过一套精心设计的治理机制，解决了 AI 辅助开发中的核心痛点：

1. **配置驱动**（PROJECT.md）— 统一管理项目状态
2. **命令封装**（4 个命令）— 标准化操作流程
3. **技能模块**（3 个 Skills）— 自动化保护逻辑
4. **文档同步**（自动更新）— 实时追踪项目进展

其核心创新在于：将复杂的治理逻辑简化为 8 个文件，以 Git 提交作为自动化触发点，用三级保护机制平衡开发效率和代码安全。

这是一个非常适合 AI 辅助开发场景的项目治理方案，让开发者既能享受 AI 带来的效率提升，又能保持对项目的完整控制。
